<!doctype html>
<html>

<head>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#11012d">
  <title>Twitter Realtime Seatch</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="apple-touch-icon" sizes="152x152" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="manifest" href="assets/manifest.json">
  <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <meta name="description" content="Search Tweets in realtime.">
	<meta name="keywords" content="">


</head>

<body>
  <div id="fb-root"></div>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s);
      js.id = id;
      js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.10";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>

  <header>
    <p id="bar">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" height="22px">
      <defs>
      <filter id="Filter_0">
      <feFlood flood-color="rgb(187, 187, 187)" flood-opacity="1" result="floodOut" />
      <feComposite operator="atop" in="floodOut" in2="SourceGraphic" result="compOut" />
      <feBlend mode="normal" in="compOut" in2="SourceGraphic" />
      </filter>
      </defs>
      <g filter="url(#Filter_0)">
      <path fill-rule="evenodd"  fill="rgb(193, 255, 235)" d="M-0.000,2.000 L-0.000,-0.000 L30.000,-0.000 L30.000,2.000 L-0.000,2.000 Z"/>
      <path fill-rule="evenodd"  fill="rgb(193, 255, 235)" d="M-0.000,12.000 L-0.000,10.000 L30.000,10.000 L30.000,12.000 L-0.000,12.000 Z"/>
      <path fill-rule="evenodd"  fill="rgb(193, 255, 235)" d="M-0.000,22.000 L-0.000,20.000 L30.000,20.000 L30.000,22.000 L-0.000,22.000 Z"/>
      </g>
      </svg>
    </p>
    <nav>
      <ul>
        <li class="external">
          <a href="https://twitter.com" target="_blank">Twitter<i class="fa fa-external-link" aria-hidden="true"></i></a>
        </li>
        <li class="external">
          <a href="http://twittrend.jp/" target="_blank">Twittrend<i class="fa fa-external-link" aria-hidden="true"></i></a>
        </li>
      </ul>
      <div class="other">
        <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">シェア</a></div>
        <a href="https://twitter.com/share" class="twitter-share-button" data-via="ikeda_ica" data-size="large">Tweet</a>
        <script>
          ! function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
              p = /^http:/.test(d.location) ? 'http' : 'https';
            if (!d.getElementById(id)) {
              js = d.createElement(s);
              js.id = id;
              js.src = p + '://platform.twitter.com/widgets.js';
              fjs.parentNode.insertBefore(js, fjs);
            }
          }(document, 'script', 'twitter-wjs');
        </script>
      </div>
    </nav>

    <div class="wrap-form">
        <input type="text" id="m" autocomplete="off" />
        <!--<button>Send</button>-->
    </div>
  </header>

  <section id="tweet">
    <ul id="messages"></ul>
  </section>

  <p id="opt">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">
    <path d="M32,17.9v-3.8l-3.6-1.3c-0.3-1.2-0.8-2.3-1.4-3.3l0,0L28.7,6L26,3.3L22.5,5l0,0c-1-0.6-2.1-1.1-3.3-1.4L17.9,0h-3.8
    	l-1.3,3.6C11.6,3.9,10.5,4.4,9.5,5l0,0L6,3.3L3.3,6L5,9.5l0,0c-0.6,1-1.1,2.1-1.4,3.3L0,14.1v3.8l3.6,1.3c0.3,1.2,0.8,2.3,1.4,3.3
    	l0,0L3.3,26L6,28.7L9.5,27l0,0c1,0.6,2.1,1.1,3.3,1.4l1.3,3.6h3.8l1.3-3.6c1.2-0.3,2.3-0.8,3.3-1.4l0,0l3.5,1.6l2.7-2.7L27,22.5l0,0
    	c0.6-1,1.1-2.1,1.4-3.3L32,17.9z M16,22.4c-3.5,0-6.4-2.9-6.4-6.4c0-3.5,2.9-6.4,6.4-6.4s6.4,2.9,6.4,6.4S19.5,22.4,16,22.4z"/>
    </svg>

  </p>
  <footer>
    <div class="wrap-input">
      <input type="checkbox" name="scroll" value="" id="as"><label for="as" class="switch"></label>
      <label for="as" class="switch-label">Auto Scroll</label>
    </div>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
    $(function() {
      var socket = io();

      $('#m').on('change', function() {
        socket.emit('search', $('#m').val());
        return false;
      });

      socket.on('message', function(tweet) {
        var thumb = '<img src="' + tweet.user.profile_image_url + '" class="thumb">';
        var url = '//twitter.com/' + tweet.user.screen_name + '/status/' + tweet.id_str;
        var tweetIn = '<a href="' + url + '" target="_blank">' + thumb + '<span>' + tweet.text + '<br>' + tweet.created_at + '<span>';
        $('#messages').append($('<li>').html(tweetIn));
        if ($('#messages li').length > 50) {
          $('#messages li').eq(0).remove();
        }
        var autoscroll = $('#as').prop('checked');
        if (autoscroll == true) {
          $('#messages').animate({
            scrollTop: $('#messages')[0].scrollHeight
          }, 'fast');
        }
      });

      $('#bar').on('click', function() {
        $('nav').slideToggle(200);
      });

      $('#opt').on('click', function() {
        $('footer').slideToggle(200);
        $(this).toggleClass('active');
      })
    });
  </script>

</body>

</html>
